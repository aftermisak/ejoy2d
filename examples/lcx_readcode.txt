
入口：
main
	->create_window
	->ejoy2d_win_init
		->create_game
		->screen_init
			->glewPoint
		->ejoy2d_game_start

主循环：
	mingw/windows.c
	WndProc 消息回调
		WM_PAINT
		WM_TIMER
		WM_MOUSEMOVE
		...

---------------------------------------------------------------------------
主要数据及其主要字段
struct vertex_attrib {
	const char * name;
	int vbslot;
	int n;
	int size;
	int offset;
};

struct texture {
	GLuint glid;
	int width;
	int height;
	int mipmap;
	enum TEXTURE_FORMAT format;
	enum TEXTURE_TYPE type;
	int memsize;
};

struct attrib_layout {
	int vbslot;
	GLint size;
 	GLenum type;
 	GLboolean normalized;
	int offset;
};

struct shader {
	GLuint glid;
#ifdef VAO_ENABLE
	GLuint glvao;
	RID vbslot[MAX_VB_SLOT];
	RID ib;
#endif
	int n;
	struct attrib_layout a[MAX_ATTRIB];
	int texture_n;
	int texture_uniform[MAX_TEXTURE];
};

struct rstate {
	RID target;
	enum BLEND_FORMAT blend_src;
	enum BLEND_FORMAT blend_dst;
	enum DEPTH_FORMAT depth;
	enum CULL_MODE cull;
	int depthmask;
	int scissor;
	RID texture[MAX_TEXTURE];
};

struct render {
	uint32_t changeflag;
	RID attrib_layout;
	RID vbslot[MAX_VB_SLOT];
	RID indexbuffer;
	RID program;
	GLint default_framebuffer;
	struct rstate current;
	struct rstate last;
	struct log log;
	struct array buffer;
	struct array attrib;
	struct array target;
	struct array texture;
	struct array shader;
};